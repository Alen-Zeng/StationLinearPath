# StationLinearPath

| 技术方向 | 开源部分                       | 开源技术点                 | 编写负责人 |
| -------- | ------------------------------ | -------------------------- | ---------- |
| 电控方案 | 视觉辅助自动兑换的电控驱动部分 | 视觉辅助兑换的电控驱动方案 | 曾熙朗     |

# 背景

​		23赛季工程兑换难度增大，在经过分区赛的尝试和国赛的规则改动后，所有的队伍都可以兑换最高等级的矿石。在此情景下，充分缩短兑换时间是提高赛场队伍作战能力的重要战略。缩短兑换时间的方法目前有2种，一种是使用自定义控制器由操作手手动兑换，另一种方案是通过视觉对兑换站的灯条进行识别从而驱动机械臂自动兑换。采用第二种方案的原因是，自定义控制器的表现始终取决于操作手的赛场表现，有较大的不确定性，而视觉自动兑换仅取决于硬件的稳定性和算法的稳定性，在保证稳定性的情况下，可以充分保证赛场的表现，并减轻操作手的赛场负担。

# 功能

- 接收视觉传来的姿态数据和空间位置数据
- 将以上数据转换为机械臂的目标位点并计算中间点和终点，中间点为机械臂前往终点的辅助点，终点为兑换站前表面向外移动一个矿石的距离（20cm，可自定义距离）
- 提供根据视觉姿态数据得出的机械臂3维运动向量数据
- 逆运动学解算及其有效性检测（机械臂机械限位）（配套华南虎23赛季国赛工程的机械臂结构）

# 依赖

- C库`math.h`
- 标准库`stdint.h`

# 文件架构

StationLinearPath:.
│  readme.md
│  StationLinearPath.cpp
│  StationLinearPath.h
│
└─兑换站路径解算文档

# 使用方法

- 云台下方地面为原点，吸盘方向为x，竖直向上为z，建立机器人坐标系

- 使用方法：

​     1. 使用结构体SLPConstantStructdef进行初始化传参，详细参数含义见代码注释，注意，该参数配套华南虎23赛季工程机器人结构

​     2. 循环调用recVisionTarget和Calculate，接收Calculate返回的结果判断

​     3. 根据calculate返回的结果决定执行的动作

# 原理与理论支持分析

参考配套文档：

[纯小三轴机械臂解算](兑换站路径解算文档/纯小三轴机械臂解算.md)

[路径规划解算](兑换站路径解算文档/路径规划解算.md)

# 未来优化方向

- 优化轨迹生成方法（使用RRT算法等